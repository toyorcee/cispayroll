import{r as C,j as e,C as j,b1 as h,f as c,u as d,h as u}from"./mui-DnFkRXo7.js";import{a as w,i as v,j as E,k as x,l as m,n as i,o as f,p as n,q as N,r as A,s as F,t as T,v as R,w as D,x as $,z as I,B as L,C as U,D as S,E as O,H as P,I as k,J as M,R as q}from"./index-BIXGQKdj.js";import{S as z}from"./vendor-CzoKn9Tw.js";import"./react-Csw2ODfV.js";const p={CREATE:e.jsx(M,{className:"text-green-500"}),UPDATE:e.jsx(k,{className:"text-blue-500"}),DELETE:e.jsx(P,{className:"text-red-500"}),UPLOAD:e.jsx(O,{className:"text-indigo-500"}),DOWNLOAD:e.jsx(S,{className:"text-cyan-500"}),PROCESS:e.jsx(U,{className:"text-orange-500"}),LOCK:e.jsx(L,{className:"text-gray-700"}),UNLOCK:e.jsx(I,{className:"text-gray-500"}),ADD:e.jsx($,{className:"text-teal-500"}),REMOVE:e.jsx(D,{className:"text-red-500"}),EDIT:e.jsx(R,{className:"text-blue-500"}),SUBMIT:e.jsx(f,{className:"text-indigo-500"}),APPROVE:e.jsx(i,{className:"text-green-500"}),REJECT:e.jsx(n,{className:"text-red-500"}),ARCHIVE:e.jsx(N,{className:"text-gray-500"}),default:e.jsx(N,{className:"text-blue-500"})},g={success:{color:"!text-green-600",icon:e.jsx(i,{className:"text-lg !text-green-600"}),bgColor:"!bg-green-50"},error:{color:"!text-rose-600",icon:e.jsx(n,{className:"text-lg !text-rose-600"}),bgColor:"!bg-rose-50"},warning:{color:"!text-yellow-600",icon:e.jsx(T,{className:"text-lg !text-yellow-600"}),bgColor:"!bg-yellow-50"},pending:{color:"!text-violet-600",icon:e.jsx(F,{className:"text-lg !text-violet-600"}),bgColor:"!bg-violet-50"},processing:{color:"!text-sky-600",icon:e.jsx(A,{className:"text-lg animate-spin !text-sky-600"}),bgColor:"!bg-sky-50"},failed:{color:"!text-red-600",icon:e.jsx(n,{className:"text-lg !text-red-600"}),bgColor:"!bg-red-50"},draft:{color:"!text-gray-600",icon:e.jsx(N,{className:"text-lg !text-gray-600"}),bgColor:"!bg-gray-50"},approved:{color:"!text-emerald-600",icon:e.jsx(i,{className:"text-lg !text-emerald-600"}),bgColor:"!bg-emerald-50"},rejected:{color:"!text-red-600",icon:e.jsx(n,{className:"text-lg !text-red-600"}),bgColor:"!bg-red-50"},submitted:{color:"!text-blue-600",icon:e.jsx(f,{className:"text-lg !text-blue-600"}),bgColor:"!bg-blue-50"},completed:{color:"!text-teal-600",icon:e.jsx(i,{className:"text-lg !text-teal-600"}),bgColor:"!bg-teal-50"}},B=s=>p[s]||p.default,H=s=>s&&g[s.toLowerCase()]||g.pending,K=s=>{const{action:t,entity:l,details:r}=s;switch(l){case"PAYROLL":return`${t} payroll for ${r.employeeName||"employee"}`;case"EMPLOYEE":return`${t} employee ${r.employeeName||""}`;case"DEPARTMENT":return`${t} department ${r.departmentName||""}`;case"SETTINGS":return`${t} system settings`;default:return`${t} ${l.toLowerCase()}`}},J=()=>{const{user:s}=w(),t=v(),{data:l=[],isLoading:r}=E({queryKey:[q],queryFn:()=>x.getRecentActivities(10),refetchInterval:3e4,staleTime:1e4});return C.useEffect(()=>{x.setUserRole(s==null?void 0:s.role),x.setQueryClient(t)},[s==null?void 0:s.role,t]),r?e.jsxs(j,{className:"bg-gradient-to-br from-emerald-50 to-white border border-emerald-100 shadow-lg",children:[e.jsx(h,{className:"border-b border-emerald-100 bg-white/80 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{className:"text-emerald-600 text-xl"}),e.jsx(c,{variant:"h6",className:"text-gray-800 font-semibold",children:"Recent Activities"})]}),e.jsx(d,{label:`${l.length} Activities`,size:"small",className:"bg-emerald-100 text-emerald-700 shadow-sm"})]})}),e.jsx(u,{children:e.jsx("div",{className:"space-y-4 p-4",children:[1,2,3].map(a=>e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white rounded-lg shadow-md animate-pulse",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]},a))})})]}):e.jsxs(j,{className:"bg-gradient-to-br from-emerald-50 to-white border border-emerald-100 shadow-lg",children:[e.jsx(h,{className:"border-b border-emerald-100 bg-white/80 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{className:"text-emerald-600 text-xl"}),e.jsx(c,{variant:"h6",className:"text-gray-800 font-semibold",children:"Recent Activities"})]}),e.jsx(d,{label:`${l.length} Activities`,size:"small",className:"bg-emerald-100 text-emerald-700 shadow-sm"})]})}),e.jsx(u,{children:l.length===0?e.jsxs("div",{className:"p-8 text-center bg-white/50",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-emerald-50 mb-4 shadow-md",children:e.jsx(m,{className:"text-4xl text-emerald-400"})}),e.jsx(c,{variant:"h6",className:"text-gray-600 mb-2",children:"No Recent Activities"}),e.jsx(c,{variant:"body2",className:"text-gray-500",children:"New activities will appear here as they occur"})]}):e.jsx("div",{className:"divide-y divide-emerald-100",children:l.map(a=>{var b;const o=H((b=a.details)==null?void 0:b.status),y=B(a.action);return e.jsx("div",{className:"p-4 hover:bg-emerald-50/80 transition-colors duration-200 bg-white/70 shadow-sm",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`p-3 rounded-full ${o.bgColor} shadow-md`,children:e.jsx("div",{className:o.color,children:y})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[e.jsx(c,{variant:"subtitle2",className:"text-gray-800 font-medium",children:K(a)}),e.jsx(d,{icon:o.icon,label:a.details.status,size:"small",className:`${o.bgColor} ${o.color} border border-current/20 shadow-sm`})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 bg-gray-50/50 px-3 py-1.5 rounded-full",children:[e.jsxs("span",{className:"font-medium",children:[a.performedBy.firstName," ",a.performedBy.lastName]}),e.jsx("span",{className:"text-gray-400",children:"â€¢"}),e.jsx("span",{children:z(new Date(a.createdAt),{addSuffix:!0})})]})]})]})},a._id)})})})]})};export{J as RecentActivities};
