import{r,j as e}from"./mui-DnFkRXo7.js";import{T as k,a as T,b as M,c as E,d as F,e as R,f as $,g as U}from"./index-CNARu3by.js";import{b as q,a as z,m as i,L as h,F as d,c,y as D}from"./index-CzyV__UH.js";import"./react-Csw2ODfV.js";import"./vendor-CzoKn9Tw.js";const H=()=>e.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 512 512",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",children:[e.jsx("rect",{width:"512",height:"512",rx:"100",fill:"currentColor",className:"text-green-600"}),e.jsx("path",{d:"M156 256C156 238.327 170.327 224 188 224H324C341.673 224 356 238.327 356 256V352C356 369.673 341.673 384 324 384H188C170.327 384 156 369.673 156 352V256Z",fill:"white"}),e.jsx("path",{d:"M256 128C282.51 128 304 149.49 304 176C304 202.51 282.51 224 256 224C229.49 224 208 202.51 208 176C208 149.49 229.49 128 256 128Z",fill:"white"})]});function Z(){const w=q(),{updatePassword:g}=z(),[u,y]=r.useState(""),[a,f]=r.useState(""),[m,b]=r.useState(""),[p,x]=r.useState(!1),[t,j]=r.useState(!1),[o,N]=r.useState(!1),[n,v]=r.useState(!1),C=[k,T,M,E,F,R,$,U],P=async s=>{if(s.preventDefault(),a===m){x(!0);try{await g(u,a),D.success("Password updated successfully! Redirecting to dashboard...",{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),setTimeout(()=>{w("/pms/dashboard")},2e3)}catch(l){console.error("Update password error:",l)}finally{x(!1)}}};return e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-50 via-gray-100 to-gray-200 -z-20",children:C.map((s,l)=>Array.from({length:8}).map((L,S)=>e.jsx(i.div,{initial:{opacity:.1},animate:{opacity:[.2,.4,.2],scale:[1,1.2,1],rotate:[0,360]},transition:{duration:Math.random()*15+10,repeat:1/0,repeatType:"reverse",delay:Math.random()*5},className:"absolute text-gray-400/30",style:{left:`${Math.random()*95}%`,top:`${Math.random()*95}%`,fontSize:`${Math.random()*60+30}px`,transform:`rotate(${Math.random()*360}deg)`,filter:"blur(0.5px)"},children:e.jsx(s,{})},`${l}-${S}`)))}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/50 to-transparent -z-10"}),e.jsxs("div",{className:"w-full max-w-md px-4 bg-white py-5 rounded-xl",children:[e.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-6",children:[e.jsxs(h,{to:"/",className:"inline-flex justify-center items-center gap-2",children:[e.jsx(H,{}),e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:"PMS"})]}),e.jsx("h2",{className:"mt-4 text-2xl font-bold tracking-tight text-gray-900",children:"Update Password"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Enter your current password and choose a new one."})]}),e.jsx(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:e.jsx("div",{className:"bg-white/90 backdrop-blur-xl shadow-2xl rounded-xl p-6",children:e.jsxs("form",{onSubmit:P,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700",children:"Current Password"}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsx("input",{id:"currentPassword",name:"currentPassword",type:t?"text":"password",autoComplete:"current-password",required:!0,value:u,onChange:s=>y(s.target.value),className:"block w-full appearance-none rounded-lg border border-gray-300 px-3 py-2 placeholder-gray-400 shadow-sm focus:border-green-500 focus:outline-none focus:ring-green-500 pr-10",placeholder:"Enter your current password"}),e.jsx("button",{type:"button",onClick:()=>j(!t),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600 cursor-pointer",children:t?e.jsx(d,{className:"h-5 w-5"}):e.jsx(c,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700",children:"New Password"}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsx("input",{id:"newPassword",name:"newPassword",type:o?"text":"password",autoComplete:"new-password",required:!0,value:a,onChange:s=>f(s.target.value),className:"block w-full appearance-none rounded-lg border border-gray-300 px-3 py-2 placeholder-gray-400 shadow-sm focus:border-green-500 focus:outline-none focus:ring-green-500 pr-10",placeholder:"Enter your new password"}),e.jsx("button",{type:"button",onClick:()=>N(!o),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600 cursor-pointer",children:o?e.jsx(d,{className:"h-5 w-5"}):e.jsx(c,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm New Password"}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:n?"text":"password",autoComplete:"new-password",required:!0,value:m,onChange:s=>b(s.target.value),className:"block w-full appearance-none rounded-lg border border-gray-300 px-3 py-2 placeholder-gray-400 shadow-sm focus:border-green-500 focus:outline-none focus:ring-green-500 pr-10",placeholder:"Confirm your new password"}),e.jsx("button",{type:"button",onClick:()=>v(!n),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600 cursor-pointer",children:n?e.jsx(d,{className:"h-5 w-5"}):e.jsx(c,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"space-y-3",children:e.jsx("button",{type:"submit",disabled:p,className:`w-full flex justify-center py-2 px-4 rounded-lg border border-transparent \r
                           !bg-green-600 !text-white font-medium hover:!bg-green-700 \r
                           focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 \r
                           transition-colors disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer`,children:p?"Updating...":"Update Password"})})]})})}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Changed your mind?"," ",e.jsx(h,{to:"/dashboard",className:"font-medium text-green-600 hover:text-green-500",children:"Return to Dashboard"})]})})]})]})}export{Z as default};
